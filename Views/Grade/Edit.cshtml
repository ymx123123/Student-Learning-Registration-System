@model StudentGradeManagementSystem.Models.Grade

@{ ViewData["Title"] = "编辑成绩"; }

<div class="container mt-4">
    <div class="row">
        <div class="col-md-8 mx-auto">
            <div class="card shadow-sm">
                <div class="card-header bg-warning text-dark">
                    <h3 class="mb-0"><i class="fas fa-edit"></i> 编辑成绩</h3>
                </div>
                <div class="card-body">
                    @if (TempData["ErrorMessage"] != null)
                    {
                        <div class="alert alert-danger" role="alert">
                            @TempData["ErrorMessage"]
                        </div>
                    }
                    
                    <!-- 显示不可编辑的信息 -->
                    <div class="mb-4">
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label class="form-label text-muted"><i class="fas fa-user-graduate"></i> 学生信息</label>
                                <div class="form-control-plaintext bg-light p-2 rounded">
                                    ID: @Model.StudentID - @Model.Student?.StudentName
                                </div>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label text-muted"><i class="fas fa-book"></i> 课程信息</label>
                                <div class="form-control-plaintext bg-light p-2 rounded">
                                    @Model.Course?.CourseName
                                </div>
                            </div>
                        </div>
                        
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label class="form-label text-muted"><i class="fas fa-user-tie"></i> 任课老师</label>
                                <div class="form-control-plaintext bg-light p-2 rounded">
                                    @Model.Teacher?.TeacherName
                                </div>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label text-muted"><i class="fas fa-info-circle"></i> 成绩ID</label>
                                <div class="form-control-plaintext bg-light p-2 rounded">
                                    @Model.GradeID
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <hr />
                    
                    <!-- 可编辑的成绩部分 -->
                    <form method="post" asp-action="Edit">
                        <input type="hidden" name="id" value="@Model.GradeID" />
                        
                        <div class="mb-4">
                            <label class="form-label"><i class="fas fa-star text-warning"></i> <strong>成绩</strong></label>
                            <div class="input-group">
                                <input type="number" name="gradeValue" class="form-control form-control-lg" 
                                       value="@Model.GradeValue" min="0" max="100" step="0.1" 
                                       placeholder="请输入成绩(0-100)" required />
                                <span class="input-group-text">分</span>
                            </div>
                            <div class="form-text text-muted">
                                <i class="fas fa-info-circle"></i> 成绩范围：0-100分，支持小数点后一位
                            </div>
                        </div>
                        
                        <div class="d-flex justify-content-between mt-4">
                            <a asp-action="Index" class="btn btn-outline-secondary btn-lg">
                                <i class="fas fa-arrow-left"></i> 返回成绩列表
                            </a>
                            <button type="submit" class="btn btn-warning btn-lg">
                                <i class="fas fa-save"></i> 更新成绩
                            </button>
                        </div>
                    </form>
                    
                    <div class="mt-3">
                        <div class="alert alert-info">
                            <i class="fas fa-lock"></i> <strong>注意：</strong>只能修改成绩值，学生、课程和教师信息不可更改。
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
}